input {
    beats {
        port => 5044
        host => "3.38.168.4"
        ssl => false
    }
}

filter {
    grok {
        match => [
            "message", "%{LOGLEVEL:log_level} %{DATESTAMP:datestamp}%{DATA:thread} %{DATA:class_and_line} - %{GREEDYDATA:message}",
            "message", "%{DATESTAMP:timestamp} %{NUMBER:response_code} %{WORD:method} %{URIPATHPARAM:request} %{DATA:http_version} %{DATA:user_agent} - %{IPV6:client_ip} %{NUMBER:bytes} %{NUMBER:response_time}"
        ]
    }
}

output {
    elasticsearch {
        hosts => "elasticsearch:9200"
        user => "logstash_internal"
        password => "${LOGSTASH_INTERNAL_PASSWORD}"
        index => "logstash-%{+YYYY.MM.dd}"
    }
}
